def make_ext(modname, pyxfilename):
    from distutils.core import Extension
    import numpy
    from Cython.Build import cythonize
    import os
    import sys
    import Cython.Compiler.Options
    Cython.Compiler.Options.annotate = True
    return Extension(name='dev', sources=["dev.pyx", "pyrost/include/st_gaussian.c",
                                          "pyrost/include/st_utils.c",
                                          "pyrost/include/st_waveprop_fftw.c",
                                          "pyrost/include/st_waveprop_np.c",], language="c",
                     extra_compile_args=['-fopenmp', '-std=c99'],
                     extra_link_args=['-fopenmp', '-Wl,-rpath,/usr/local/lib'],
                     libraries=['gsl', 'gslcblas', 'fftw3', 'fftw3_omp'],
                     library_dirs=[os.path.join(sys.prefix, 'lib'),
                                   '/usr/local/lib'],
                     include_dirs=[numpy.get_include(),
                                   os.path.join(sys.prefix, 'include'),
                                   os.path.join(os.path.dirname(__file__),
                                   'pyrost/include')])